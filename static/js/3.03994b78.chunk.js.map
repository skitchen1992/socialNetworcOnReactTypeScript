{"version":3,"sources":["hoc/withAuthRedirect.tsx","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusHooks.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","module","exports","ProfileStatusHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onChange","e","currentTarget","value","onBlur","updateUserStatus","autoFocus","onDoubleClick","ProfileInfo","profile","className","classes","img1","userInfo","logo","img","src","photos","large","about","name","fullName","contacts","website","Preloader","Post","message","likesCount","MyPosts","React","memo","postsElements","profilePage","posts","map","el","id","myPosts","AddNewPostFormRedux","onSubmit","values","addPost","newPostText","maxLength10","maxLengthCreator","reduxForm","form","handleSubmit","Field","component","Textarea","placeholder","validate","required","button","MyPostsContainer","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getUserProfile","getUserStatus","compose","withRouter"],"mappings":"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","file":"static/js/3.03994b78.chunk.js","sourcesContent":["import React, {ComponentType} from 'react';\nimport {Redirect} from \"react-router\";\nimport {connect} from \"react-redux\";\nimport {AppStateType} from \"../redux/redux-store\";\n\ntype mapStateToPropsType = {\n    isAuth:boolean\n}\nconst mapStateToProps = (state:AppStateType ):mapStateToPropsType =>{\n    return{\n        isAuth: state.auth.isAuth\n    }\n}\n\nexport function withAuthRedirect<T>(Component:ComponentType<T>){\n\n    const AuthRedirectComponent = (props:mapStateToPropsType ) => {\n        let {isAuth,...restProps} = props\n        if (!isAuth) {\n            return <Redirect to={\"/login\"}/>\n\n        }\n        return <Component {...restProps as T}/>\n\n    }\n\n    return connect(mapStateToProps)(AuthRedirectComponent);\n};\n\nexport default withAuthRedirect;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img1\":\"ProfileInfo_img1__2Mwvh\",\"userInfo\":\"ProfileInfo_userInfo__3hlxg\",\"img\":\"ProfileInfo_img__1lpBU\",\"about\":\"ProfileInfo_about__ogyhT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__A0EJd\",\"post__circle\":\"Post_post__circle__3iTOx\"};","import React, {useEffect, useState} from \"react\";\n\n\ntype ProfileStatusType = {\n    status: string\n    updateUserStatus: (status: string) => void\n}\n\nexport const ProfileStatusHooks = (props: ProfileStatusType) => {\n    const [editMode, setEditMode] = useState<boolean>(false)\n    const [status, setStatus] = useState<string>(props.status)\n    useEffect(()=>{\n        setStatus(props.status)\n    },[props.status])\n\n    const activateEditMode = () => {\n        setEditMode(true)\n    }\n    const onStatusChange = (e:any) => {\n        setStatus(e.currentTarget.value)\n    }\n    const deactivateEditMode = () => {\n        setEditMode(false)\n        props.updateUserStatus(status)\n    }\n    return (\n        <div>\n            {editMode\n                ? <input onChange={onStatusChange} onBlur={deactivateEditMode}\n                         value={status} autoFocus/>\n                : <span onDoubleClick={activateEditMode}>{status || \"Нет статуса\"}</span>}\n        </div>\n    )\n}\n\n","import classes from './ProfileInfo.module.css';\nimport Preloader from \"../../common/Preloader/Preloader\";\nimport {ProfileType} from \"../ProfileContainer\";\nimport {ProfileStatusHooks} from \"./ProfileStatusHooks\";\n\ntype ProfileInfoType = {\n    profile: ProfileType | null\n    status:string\n    updateUserStatus:(status:string)=>void\n}\n\nfunction ProfileInfo(props: ProfileInfoType) {\n    if (!props.profile) {\n        return <Preloader/>\n    }\n    return (\n        <div>\n            <div className={classes.img1}></div>\n            <div className={classes.userInfo}>\n                <div className={classes.logo}>\n                    <img className={classes.img} src={props.profile.photos.large}></img>\n                </div>\n\n                <div className={classes.about}>\n                    <div className={classes.name}>{props.profile.fullName}</div>\n                    <ProfileStatusHooks status={props.status} updateUserStatus={props.updateUserStatus}/>\n                    <p>Date of Birth:<span>2 january</span></p>\n                    <p>City:<span>Moscow</span></p>\n                    <p>Education:<span>BSU 11</span></p>\n                    <p>WEB\n                        Site:<span>{props.profile.contacts.website != null ? props.profile.contacts.website : \" Сайта нет\"}</span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProfileInfo;","import './Post.module.css';\n\n\ntype PostType = {\n    id:string ,\n    message:string,\n    likesCount:number,\n}\nfunction Post(props: PostType ){\n\n    return(\n        <div>\n            <div className=\"post\">\n                <div className=\"post__circle\"/>\n                <p>{props.message}</p>\n            </div>\n            <div>Like{props.likesCount}</div>\n        </div>\n    )\n}\nexport default Post;","import classes from './MyPosts.module.css';\nimport Post from './Post/Post';\nimport React from \"react\";\nimport {MyPostsPropsType} from \"./MyPostsContainer\";\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\nimport {Textarea} from \"../../common/FormsControls/FormsControls\";\n\n\nconst MyPosts = React.memo(function MyPosts(props: MyPostsPropsType) {\n    let postsElements = props.profilePage.posts.map((el) =>\n        <Post id={el.id} message={el.message} likesCount={el.likesCount} key={el.id}/>)\n\n    let onAddPost = (values: FormDataType) => {\n        props.addPost(values.newPostText)\n    }\n    return (\n        <div>\n            <div className={classes.posts}>\n                <div className={classes.myPosts}>My posts</div>\n                <AddNewPostFormRedux onSubmit={onAddPost}/>\n            </div>\n            {postsElements}\n        </div>\n    )\n})\n\ntype FormDataType = {\n    newPostText: string\n}\nconst maxLength10 = maxLengthCreator(10)\nconst AddNewPostForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <Field name={\"newPostText\"}\n                   component={Textarea}\n                   placeholder=\"Ввидите сообщение\"\n                   validate={[required, maxLength10]}/>\n            <div>\n                <button className={classes.button}>Add Post</button>\n            </div>\n\n        </form>\n    )\n}\nconst AddNewPostFormRedux = reduxForm<FormDataType>({form: 'profileAddNewPostForm'})(AddNewPostForm)\n\nexport default MyPosts;","import {addPostActionCreator} from \"../../../redux/profile-reducer\";\nimport React from \"react\";\nimport {Dispatch} from \"redux\";\nimport {connect} from \"react-redux\";\nimport MyPosts from \"./MyPosts\";\nimport {ProfileStateType} from \"../../../redux/profile-reducer\";\nimport {AppStateType} from \"../../../redux/redux-store\";\n\ntype MapStateToPropsType = {\n    profilePage: ProfileStateType\n}\ntype MapDispatchToPropsType = {\n    addPost:(newPostText:string)=>void\n}\n\nexport type MyPostsPropsType = MapStateToPropsType & MapDispatchToPropsType\n\nconst mapStateToProps = (state:AppStateType):MapStateToPropsType =>{\n    return{\n        profilePage:state.profilePage,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch)=>{\n    return {\n        addPost:(newPostText:string)=>{\n            dispatch(addPostActionCreator(newPostText))\n        }\n    }\n}\n\n\nexport const MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)","import './Profile.css';\n\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\n\nimport {MyPostsContainer} from \"./MyPosts/MyPostsContainer\";\nimport {ProfileType} from \"./ProfileContainer\";\n\nimport React from \"react\";\n\ntype ProfileTypeProps = {\n    profile: ProfileType | null\n    status:string\n    updateUserStatus:(status:string)=>void\n\n}\n\n\nfunction Profile(props:ProfileTypeProps) {\n\n    return (\n        <div>\n            <ProfileInfo profile={props.profile} status={props.status} updateUserStatus={props.updateUserStatus}/>\n            <MyPostsContainer/>\n        </div>\n    )\n}\n\nexport default Profile;","import './Profile.css';\nimport React from \"react\";\nimport Profile from \"./Profile\";\nimport {getUserProfile, getUserStatus, updateUserStatus} from \"../../redux/profile-reducer\";\nimport {connect} from \"react-redux\";\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router\";\nimport {AppStateType} from \"../../redux/redux-store\";\nimport withAuthRedirect from \"../../hoc/withAuthRedirect\";\nimport {compose} from \"redux\";\n\nexport type ProfileType = {\n    \"aboutMe\": string,\n    \"contacts\": {\n        \"facebook\": string,\n        \"website\": null | string,\n        \"vk\": string,\n        \"twitter\": string,\n        \"instagram\": string,\n        \"youtube\": null | string,\n        \"github\": string,\n        \"mainLink\": null | string\n    },\n    \"lookingForAJob\": true,\n    \"lookingForAJobDescription\": string,\n    \"fullName\": string,\n    \"userId\": number,\n    \"photos\": {\n        \"small\": string,\n        \"large\": string\n    }\n\n}\ntype mapStateToPropsType = {\n    profile: ProfileType | null\n    status: string\n    authorizedUserId: string | null\n    isAuth: boolean\n}\n\ninterface MatchParams {\n    userId: string;\n}\n\ntype ProfileContainerPropsType = RouteComponentProps<MatchParams> & {\n    profile: ProfileType | null\n    getUserProfile: (userId: number) => void\n    getUserStatus: (userId: number) => void\n    updateUserStatus: (status: string) => void\n    isAuth: boolean\n    status: string\n    authorizedUserId: string | null\n}\n\nclass ProfileContainer extends React.Component<ProfileContainerPropsType> {\n    componentDidMount() {\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.authorizedUserId!\n            if(!userId){\n                this.props.history.push(\"/login\")\n            }\n        }\n        this.props.getUserProfile(+userId)\n        this.props.getUserStatus(+userId)\n    }\n\n\n    render() {\n        return (\n            <div>\n                <Profile{...this.props} profile={this.props.profile} status={this.props.status}\n                        updateUserStatus={this.props.updateUserStatus}/>\n            </div>\n        )\n    }\n\n\n}\n\nlet mapStateToProps = (state: AppStateType): mapStateToPropsType => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    authorizedUserId: state.auth.id,\n    isAuth: state.auth.isAuth\n\n\n})\nexport default compose<React.ComponentType>(\n    connect(mapStateToProps, {getUserProfile, getUserStatus, updateUserStatus}),\n    withRouter,\n    withAuthRedirect\n)(ProfileContainer)\n\n\n\n\n\n"],"sourceRoot":""}