{"version":3,"sources":["hoc/withAuthRedirect.tsx","components/Profile/ProfileInfo/ProfileInfo.module.css","components/Profile/MyPosts/Post/Post.module.css","components/Profile/ProfileInfo/ProfileStatusHooks.tsx","components/Profile/ProfileInfo/ProfileInfo.tsx","components/Profile/MyPosts/Post/Post.tsx","components/Profile/MyPosts/MyPosts.tsx","components/Profile/MyPosts/MyPostsContainer.tsx","components/Profile/Profile.tsx","components/Profile/ProfileContainer.tsx"],"names":["mapStateToProps","state","isAuth","auth","withAuthRedirect","Component","connect","props","restProps","to","module","exports","ProfileStatusHooks","useState","editMode","setEditMode","status","setStatus","useEffect","onChange","e","currentTarget","value","onBlur","updateUserStatus","autoFocus","onDoubleClick","ProfileInfo","profile","className","classes","img1","userInfo","logo","img","src","photos","large","userPhoto","isOwner","target","files","length","savePhoto","type","about","name","fullName","contacts","website","Preloader","Post","message","likesCount","MyPosts","React","memo","postsElements","profilePage","posts","map","el","id","myPosts","AddNewPostFormRedux","onSubmit","values","addPost","newPostText","maxLength10","maxLengthCreator","reduxForm","form","handleSubmit","Field","component","Textarea","placeholder","validate","required","button","MyPostsContainer","dispatch","addPostActionCreator","Profile","ProfileContainer","userId","this","match","params","authorizedUserId","history","push","getUserProfile","getUserStatus","refreshProfile","prevProps","prevState","snapshot","compose","withRouter"],"mappings":"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","file":"static/js/3.a6bb699c.chunk.js","sourcesContent":["import React, {ComponentType} from 'react';\nimport {Redirect} from \"react-router\";\nimport {connect} from \"react-redux\";\nimport {AppStateType} from \"../redux/redux-store\";\n\ntype mapStateToPropsType = {\n    isAuth:boolean\n}\nconst mapStateToProps = (state:AppStateType ):mapStateToPropsType =>{\n    return{\n        isAuth: state.auth.isAuth\n    }\n}\n\nexport function withAuthRedirect<T>(Component:ComponentType<T>){\n\n    const AuthRedirectComponent = (props:mapStateToPropsType ) => {\n        let {isAuth,...restProps} = props\n        if (!isAuth) {\n            return <Redirect to={\"/login\"}/>\n\n        }\n        return <Component {...restProps as T}/>\n\n    }\n\n    return connect(mapStateToProps)(AuthRedirectComponent);\n};\n\nexport default withAuthRedirect;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"img1\":\"ProfileInfo_img1__2Mwvh\",\"userInfo\":\"ProfileInfo_userInfo__3hlxg\",\"img\":\"ProfileInfo_img__1lpBU\",\"about\":\"ProfileInfo_about__ogyhT\",\"logo\":\"ProfileInfo_logo__2_ojy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"post\":\"Post_post__A0EJd\",\"post__circle\":\"Post_post__circle__3iTOx\"};","import React, {useEffect, useState} from \"react\";\n\n\ntype ProfileStatusType = {\n    status: string\n    updateUserStatus: (status: string) => void\n}\n\nexport const ProfileStatusHooks = (props: ProfileStatusType) => {\n    const [editMode, setEditMode] = useState<boolean>(false)\n    const [status, setStatus] = useState<string>(props.status)\n    useEffect(()=>{\n        setStatus(props.status)\n    },[props.status])\n\n    const activateEditMode = () => {\n        setEditMode(true)\n    }\n    const onStatusChange = (e:any) => {\n        setStatus(e.currentTarget.value)\n    }\n    const deactivateEditMode = () => {\n        setEditMode(false)\n        props.updateUserStatus(status)\n    }\n    return (\n        <div>\n            {editMode\n                ? <input onChange={onStatusChange} onBlur={deactivateEditMode}\n                         value={status} autoFocus/>\n                : <span onDoubleClick={activateEditMode}>{status || \"Нет статуса\"}</span>}\n        </div>\n    )\n}\n\n","import classes from './ProfileInfo.module.css';\nimport Preloader from \"../../common/Preloader/Preloader\";\nimport {ProfileType} from \"../ProfileContainer\";\nimport {ProfileStatusHooks} from \"./ProfileStatusHooks\";\nimport userPhoto from \"../../../assets/images/2.png\";\nimport {ChangeEvent} from \"react\";\n\ntype ProfileInfoType = {\n    profile: ProfileType | null\n    status: string\n    updateUserStatus: (status: string) => void\n    isOwner: boolean\n    savePhoto:(file: File)=>void\n}\n\nfunction ProfileInfo(props: ProfileInfoType) {\n    if (!props.profile) {\n        return <Preloader/>\n    }\n    const mainPhotoSelected=(e: ChangeEvent<HTMLInputElement>)=>{\n        if(e?.target?.files?.length){\n            props.savePhoto(e.target.files[0])\n        }\n    }\n    return (\n        <div>\n            <div className={classes.img1}></div>\n            <div className={classes.userInfo}>\n                <div className={classes.logo}>\n                    <img className={classes.img} src={props.profile.photos.large || userPhoto}></img>\n                    {props.isOwner && <input onChange={mainPhotoSelected} type={\"file\"}/>}\n                </div>\n\n                <div className={classes.about}>\n                    <div className={classes.name}>{props.profile.fullName}</div>\n                    <ProfileStatusHooks status={props.status} updateUserStatus={props.updateUserStatus}/>\n                    <p>Date of Birth:<span>2 january</span></p>\n                    <p>City:<span>Moscow</span></p>\n                    <p>Education:<span>BSU 11</span></p>\n                    <p>WEB\n                        Site:<span>{props.profile.contacts.website != null ? props.profile.contacts.website : \" Сайта нет\"}</span>\n                    </p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ProfileInfo;","import './Post.module.css';\n\n\ntype PostType = {\n    id:string ,\n    message:string,\n    likesCount:number,\n}\nfunction Post(props: PostType ){\n\n    return(\n        <div>\n            <div className=\"post\">\n                <div className=\"post__circle\"/>\n                <p>{props.message}</p>\n            </div>\n            <div>Like{props.likesCount}</div>\n        </div>\n    )\n}\nexport default Post;","import classes from './MyPosts.module.css';\nimport Post from './Post/Post';\nimport React from \"react\";\nimport {MyPostsPropsType} from \"./MyPostsContainer\";\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\nimport {maxLengthCreator, required} from \"../../../utils/validators/validators\";\nimport {Textarea} from \"../../common/FormsControls/FormsControls\";\n\n\nconst MyPosts = React.memo(function MyPosts(props: MyPostsPropsType) {\n    let postsElements = props.profilePage.posts.map((el) =>\n        <Post id={el.id} message={el.message} likesCount={el.likesCount} key={el.id}/>)\n\n    let onAddPost = (values: FormDataType) => {\n        props.addPost(values.newPostText)\n    }\n    return (\n        <div>\n            <div className={classes.posts}>\n                <div className={classes.myPosts}>My posts</div>\n                <AddNewPostFormRedux onSubmit={onAddPost}/>\n            </div>\n            {postsElements}\n        </div>\n    )\n})\n\ntype FormDataType = {\n    newPostText: string\n}\nconst maxLength10 = maxLengthCreator(10)\nconst AddNewPostForm: React.FC<InjectedFormProps<FormDataType>> = (props) => {\n    return (\n        <form onSubmit={props.handleSubmit}>\n            <Field name={\"newPostText\"}\n                   component={Textarea}\n                   placeholder=\"Ввидите сообщение\"\n                   validate={[required, maxLength10]}/>\n            <div>\n                <button className={classes.button}>Add Post</button>\n            </div>\n\n        </form>\n    )\n}\nconst AddNewPostFormRedux = reduxForm<FormDataType>({form: 'profileAddNewPostForm'})(AddNewPostForm)\n\nexport default MyPosts;","import {addPostActionCreator} from \"../../../redux/profile-reducer\";\nimport React from \"react\";\nimport {Dispatch} from \"redux\";\nimport {connect} from \"react-redux\";\nimport MyPosts from \"./MyPosts\";\nimport {ProfileStateType} from \"../../../redux/profile-reducer\";\nimport {AppStateType} from \"../../../redux/redux-store\";\n\ntype MapStateToPropsType = {\n    profilePage: ProfileStateType\n}\ntype MapDispatchToPropsType = {\n    addPost:(newPostText:string)=>void\n}\n\nexport type MyPostsPropsType = MapStateToPropsType & MapDispatchToPropsType\n\nconst mapStateToProps = (state:AppStateType):MapStateToPropsType =>{\n    return{\n        profilePage:state.profilePage,\n    }\n}\n\nconst mapDispatchToProps = (dispatch: Dispatch)=>{\n    return {\n        addPost:(newPostText:string)=>{\n            dispatch(addPostActionCreator(newPostText))\n        }\n    }\n}\n\n\nexport const MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts)","import './Profile.css';\n\nimport ProfileInfo from \"./ProfileInfo/ProfileInfo\";\n\nimport {MyPostsContainer} from \"./MyPosts/MyPostsContainer\";\nimport {ProfileType} from \"./ProfileContainer\";\n\nimport React from \"react\";\n\ntype ProfileTypeProps = {\n    profile: ProfileType | null\n    status:string\n    updateUserStatus:(status:string)=>void\n    isOwner:boolean\n    savePhoto:(e:any)=>void\n}\n\n\nfunction Profile(props:ProfileTypeProps) {\n\n    return (\n        <div>\n            <ProfileInfo profile={props.profile}\n                         isOwner={props.isOwner}\n                         status={props.status}\n                         updateUserStatus={props.updateUserStatus}\n                         savePhoto={props.savePhoto}\n            />\n            <MyPostsContainer/>\n        </div>\n    )\n}\n\nexport default Profile;","import './Profile.css';\nimport React from \"react\";\nimport Profile from \"./Profile\";\nimport {getUserProfile, getUserStatus, savePhoto, updateUserStatus} from \"../../redux/profile-reducer\";\nimport {connect} from \"react-redux\";\nimport {Redirect, RouteComponentProps, withRouter} from \"react-router\";\nimport {AppStateType} from \"../../redux/redux-store\";\nimport withAuthRedirect from \"../../hoc/withAuthRedirect\";\nimport {compose} from \"redux\";\n\ntype PhotoType = {\n    \"small\": string,\n    \"large\": string\n}\nexport type ProfileType = {\n    \"aboutMe\"?: string,\n    \"contacts\": {\n        \"facebook\": string,\n        \"website\": null | string,\n        \"vk\": string,\n        \"twitter\": string,\n        \"instagram\": string,\n        \"youtube\": null | string,\n        \"github\": string,\n        \"mainLink\": null | string\n    },\n    \"lookingForAJob\": true,\n    \"lookingForAJobDescription\": string,\n    \"fullName\": string,\n    \"userId\": number,\n    \"photos\": PhotoType\n\n}\ntype mapStateToPropsType = {\n    profile: ProfileType | null\n    status: string\n    authorizedUserId: string | null\n    isAuth: boolean\n}\n\ninterface MatchParams {\n    userId: string;\n}\n\ntype ProfileContainerPropsType = RouteComponentProps<MatchParams> & {\n    profile: ProfileType | null\n    getUserProfile: (userId: number) => void\n    getUserStatus: (userId: number) => void\n    updateUserStatus: (status: string) => void\n    isAuth: boolean\n    status: string\n    authorizedUserId: string | null\n    savePhoto:(e:any)=>void\n}\n\nclass ProfileContainer extends React.Component<ProfileContainerPropsType> {\n    refreshProfile(){\n        let userId = this.props.match.params.userId\n        if (!userId) {\n            userId = this.props.authorizedUserId!\n            if(!userId){\n                this.props.history.push(\"/login\")\n            }\n        }\n        this.props.getUserProfile(+userId)\n        this.props.getUserStatus(+userId)\n    }\n    componentDidMount() {\n        this.refreshProfile()\n    }\n    componentDidUpdate(prevProps: Readonly<ProfileContainerPropsType>, prevState: Readonly<{}>, snapshot?: any) {\n       if(this.props.match.params.userId != prevProps.match.params.userId)\n        this.refreshProfile()\n    }\n\n\n    render() {\n        return (\n            <div>\n                <Profile{...this.props}\n                        isOwner={!this.props.match.params.userId}\n                        profile={this.props.profile} status={this.props.status}\n                        updateUserStatus={this.props.updateUserStatus}\n                        savePhoto={this.props.savePhoto}\n                />\n            </div>\n        )\n    }\n\n\n}\n\nlet mapStateToProps = (state: AppStateType): mapStateToPropsType => ({\n    profile: state.profilePage.profile,\n    status: state.profilePage.status,\n    authorizedUserId: state.auth.id,\n    isAuth: state.auth.isAuth\n\n\n})\nexport default compose<React.ComponentType>(\n    connect(mapStateToProps, {getUserProfile, getUserStatus, updateUserStatus, savePhoto}),\n    withRouter,\n    withAuthRedirect,\n)(ProfileContainer)\n\n\n\n\n\n"],"sourceRoot":""}